{
  "$schema": "../config.schema.json",
  "schema_version": "2.0",
  "workflows": [
    {
      "id": "default",
      "description": "Enterprise FABER workflow with hooks, safety, and comprehensive logging",
      "phases": {
        "frame": {
          "enabled": true,
          "description": "Fetch work item, classify, and setup environment",
          "steps": [
            {
              "name": "fetch-work",
              "description": "Fetch work item details from issue tracker",
              "skill": "fractary-work:issue-fetcher"
            },
            {
              "name": "classify",
              "description": "Classify work type (feature, bug, chore)",
              "skill": "work-classifier"
            },
            {
              "name": "setup-env",
              "description": "Create branch and setup development environment",
              "skill": "fractary-repo:branch-manager"
            }
          ],
          "validation": ["work-item-exists", "branch-created"]
        },
        "architect": {
          "enabled": true,
          "description": "Generate technical specification with standards",
          "steps": [
            {
              "name": "generate-spec",
              "description": "Generate specification from requirements and context",
              "skill": "fractary-spec:spec-generator",
              "config": {
                "use_issue_context": true,
                "auto_detect_template": true
              }
            }
          ],
          "validation": ["spec-created", "spec-validated"]
        },
        "build": {
          "enabled": true,
          "description": "Implement solution following coding standards",
          "steps": [
            {
              "name": "implement",
              "description": "Implement solution based on specification"
            },
            {
              "name": "commit",
              "description": "Create semantic commit with work item linkage",
              "skill": "fractary-repo:commit-creator",
              "config": {
                "conventional_commits": true,
                "link_to_issue": true
              }
            }
          ],
          "validation": ["implementation-complete", "tests-pass", "committed"]
        },
        "evaluate": {
          "enabled": true,
          "description": "Comprehensive testing and review",
          "max_retries": 3,
          "steps": [
            {
              "name": "test",
              "description": "Run automated test suite (unit, integration, e2e)"
            },
            {
              "name": "review",
              "description": "Code review and quality analysis"
            },
            {
              "name": "fix",
              "description": "Fix issues identified during evaluation",
              "conditional": "only_if_failures"
            }
          ],
          "validation": ["all-tests-pass", "review-approved", "no-critical-issues"]
        },
        "release": {
          "enabled": true,
          "description": "Create PR, update docs, prepare deployment",
          "require_approval": true,
          "steps": [
            {
              "name": "create-pr",
              "description": "Create pull request with comprehensive description",
              "skill": "fractary-repo:pr-manager",
              "config": {
                "draft_if_assist": true,
                "auto_link_issue": true
              }
            },
            {
              "name": "update-docs",
              "description": "Update project documentation",
              "skill": "fractary-docs:docs-manager",
              "config": {
                "auto_detect_changes": true
              }
            }
          ],
          "validation": ["pr-created", "ci-pass", "docs-updated"]
        }
      },
      "hooks": {
        "pre_frame": [],
        "post_frame": [],
        "pre_architect": [
          {
            "type": "document",
            "name": "architecture-standards",
            "path": "docs/architecture/STANDARDS.md",
            "description": "Load architecture standards for design phase"
          }
        ],
        "post_architect": [],
        "pre_build": [
          {
            "type": "document",
            "name": "coding-standards",
            "path": "docs/development/CODING_STANDARDS.md",
            "description": "Load coding standards before implementation"
          }
        ],
        "post_build": [],
        "pre_evaluate": [],
        "post_evaluate": [],
        "pre_release": [
          {
            "type": "skill",
            "name": "final-review",
            "skill": "code-review",
            "description": "Final comprehensive code review",
            "timeout": 600
          }
        ],
        "post_release": [
          {
            "type": "script",
            "name": "notify-team",
            "path": "./scripts/notify-release.sh",
            "description": "Notify team of release completion",
            "on_error": "continue"
          }
        ]
      },
      "autonomy": {
        "level": "guarded",
        "description": "Secure mode with approval gates - recommended for production",
        "pause_before_release": true,
        "require_approval_for": ["release", "deploy", "merge_to_main"],
        "overrides": {}
      }
    }
  ],
  "integrations": {
    "work_plugin": "fractary-work",
    "repo_plugin": "fractary-repo",
    "spec_plugin": "fractary-spec",
    "logs_plugin": "fractary-logs"
  },
  "logging": {
    "use_logs_plugin": true,
    "log_type": "workflow",
    "log_level": "info",
    "log_phases": true,
    "log_sub_steps": true,
    "log_hooks": true
  },
  "safety": {
    "protected_paths": [
      "secrets/**",
      "infra/prod/**",
      ".env*",
      "credentials/**",
      "keys/**"
    ],
    "require_confirm_for": [
      "deploy",
      "merge_to_main",
      "tag_release",
      "delete_resource"
    ]
  }
}
